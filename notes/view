View :

View is the simpelst part of MVC structure at the basic level it is just a HTML boilerplate where you can play with instance variable received from the controller and placing it to the browser.

we can explicitly tell the controller to call the particular view file using 'render' method.

What is Layout ?
The common header and footer content in a webpage are been segregated in to seperated file called layout to avoid repeatablity of code.layout lies in 'app/views/layout'

for new Rails application 'application.html.erb' is the basic layout.usually navbars ,footers and snippets of code displaying flash is used in layout.

Preprocessor:

Preprocessor is a program that process an data to produce an output and that output is used as input to another program.

ERB(Embedded Ruby) is a special way of executing ruby code inside HTML .

Difference between <% %> and <%= %>:

<%= - it displays in webpage whatever returned in the erb tags. like <%= @user.firstname%> returns 'vinod' in the webpage.

<% - it is to execute purely ruby code like 'if' 'for' statements.

Example

    <% if current_user.signed_in? %>
      <ul>
        <% @users.each do |user| %>
          <li><%= user.first_name %></li>
        <% end %>
      </ul>
    <% else %>
      <strong>You must sign in!</strong>
    <% end %>


In the code above, if the user is signed in it will actually render to the web something like:

    <ul>
      <li>Bob</li>
      <li>Joe</li>
      <li>Nancy</li>
    </ul>

If the user isn't signed in, it'll be the much shorter:

    <strong>You must sign in!</strong>

How Do Preprocessor work ?

ERB execution is done on the server and then final HTML file is been rendered to the browser. Rails knows it has to preprocess the file by seeing the extension '.html.erb'.

Rails start from outside in with extra extension here '.html.erb' erb is preprocessed then it is treated as HTML file.

'.css.scss' uses SASS preprocessor before coming to CSS file .

'js.coffee' uses Coffeescript preprocessor before regular javascript file.

preprocessor makes the life easier by allowing us to use loops working with variables.

What is partials ?

common view template for several view files can be stored as layout.

it is stored with starting with '_' _user_form.html.erb

partials can ber rendered like
   # app/views/users/new.html.erb
    <div class="new-user-form">
      <%= render "user_form" %>
    <div>

 if partials are stored inside 'shared 'directory then it can be rendered using

 <%= render "shared/user_form" %>

 Using Local Variables in Hash:

 We can use @user local variable in partials but if more controllers are usign this partials surely it will end up in mess so in order to use local variables Rails lets you to pass options hash.

 :locals key in options hash will contain the variables to be passed.

 <%= render "shared/somepartials", :locals => {:user => @user} %>

 To use the variable in your partial file, you drop the @ and call it like a normal variable.


